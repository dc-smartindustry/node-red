{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Node-Red Basis Workshop De eerste stappen in Node-Red. In deze workshop gaan we een weerstation maken in Node-Red met de data van Buienradar. Waarom is dit onderdeel van Smart Industry? Data visualiseren op een dashboard is een nuttige vaardigheid in de industrie. Dit zal je steeds vaker tegen komen zowel online als bij machines in het veld. Met deze workshop maak je kennis met Node-Red en hoe dit programma kan helpen om meerdere systemen aan elkaar te verbinden en zo een overzicht te geven van wat er speelt. In de opleiding zal je ook je eigen microcontroller verbinden aan de cloud en zo de gegevens van de aangesloten sensoren kunnen uitlezen. Om dit in een online omgeving te kunnen doen gebruiken we hier de online weer data van Buienradar, maar dit kan natuurlijk net zo goed je eigen temperatuur sensor zijn. Deze workshop is onderdeel van de opleiding Smart Industry van het Drenthe College. Meer info op https://www.drenthecollege.nl","title":"Home"},{"location":"#node-red-basis-workshop","text":"De eerste stappen in Node-Red. In deze workshop gaan we een weerstation maken in Node-Red met de data van Buienradar. Waarom is dit onderdeel van Smart Industry? Data visualiseren op een dashboard is een nuttige vaardigheid in de industrie. Dit zal je steeds vaker tegen komen zowel online als bij machines in het veld. Met deze workshop maak je kennis met Node-Red en hoe dit programma kan helpen om meerdere systemen aan elkaar te verbinden en zo een overzicht te geven van wat er speelt. In de opleiding zal je ook je eigen microcontroller verbinden aan de cloud en zo de gegevens van de aangesloten sensoren kunnen uitlezen. Om dit in een online omgeving te kunnen doen gebruiken we hier de online weer data van Buienradar, maar dit kan natuurlijk net zo goed je eigen temperatuur sensor zijn. Deze workshop is onderdeel van de opleiding Smart Industry van het Drenthe College. Meer info op https://www.drenthecollege.nl","title":"Node-Red Basis Workshop"},{"location":"docker-install/","text":"Docker installatie Installeer als eerste Docker zelf. Ga hiervoor naar https://www.docker.com/ en klik op \"Get Started\" Selecteer hier voor welk systeem je Docker wilt installeren en klik op \"Get Docker\" Windows Versie Als je een Microsoft Windows 10 Professional of Enterprise 64-bit versie hebt kies je voor Docker Desktop Anders moet je Docker Toolbox installeren. Docker Desktop Als de download klaar is kun je het programma installeren. Kies in het configuratie scherm voor de standaard opties. Nadat de installatie klaar is moet de computer opnieuw worden opgestart. Mocht je nog documenten open hebben, dan ik het handig deze eerst op te slaan, voordat je de computer opnieuw opstart. Na het opstarten is Docker klaar voor gebruik. Docker Toolbox De instructies voor Docker Toolbox zijn wat uitgebreider en hebben we niet opgenomen in deze handleiding. Deze uitgebreide engelstalige handleiding kun je vinden op de Docker website. https://docs.docker.com/toolbox/overview/","title":"Docker installatie"},{"location":"docker-install/#docker-installatie","text":"Installeer als eerste Docker zelf. Ga hiervoor naar https://www.docker.com/ en klik op \"Get Started\" Selecteer hier voor welk systeem je Docker wilt installeren en klik op \"Get Docker\" Windows Versie Als je een Microsoft Windows 10 Professional of Enterprise 64-bit versie hebt kies je voor Docker Desktop Anders moet je Docker Toolbox installeren.","title":"Docker installatie"},{"location":"docker-install/#docker-desktop","text":"Als de download klaar is kun je het programma installeren. Kies in het configuratie scherm voor de standaard opties. Nadat de installatie klaar is moet de computer opnieuw worden opgestart. Mocht je nog documenten open hebben, dan ik het handig deze eerst op te slaan, voordat je de computer opnieuw opstart. Na het opstarten is Docker klaar voor gebruik.","title":"Docker Desktop"},{"location":"docker-install/#docker-toolbox","text":"De instructies voor Docker Toolbox zijn wat uitgebreider en hebben we niet opgenomen in deze handleiding. Deze uitgebreide engelstalige handleiding kun je vinden op de Docker website. https://docs.docker.com/toolbox/overview/","title":"Docker Toolbox"},{"location":"docker-run/","text":"Docker starten Power Shell Het is aan te bevelen om voor de commando's hieronder de Windows Power Shell te gebruiken. Je start deze als administrator door in het zoekveld van Windows (windows toets en dan beginnen te typen) Power Shell in te typen. Naast het menu krijg je nu de optie om \"Power Shell\" te starten als administrator. Dit geeft je wat meer rechten waardoor je de installatie commando's mag uitvoeren. Om een Node-Red server te starten kun je Docker gebruiken is de meest simpele vorm: Wacht nog even met het uitvoeren dit komt later. docker run -it -p 1880:1880 --name mynodered nodered/node-red Het commando bestaat uit de volgende elementen: docker run - Het starten van de container. Deze wordt lokaal opgebouwd indien nodig -it - Koppel een terminal venster zodat we kunnen zien wat ergebeurt. -p 1880:1880 - Verbind de lokale poort 1880 met de interne poort 1880 --name mynodered - geef deze machine een lokale vriendelijke naam nodered/node-red - het image waarop deze machine gebasseerd is. Beheer van gebruikers data Standaard werkt Docker zo, dat als je de container weer stopt, dat deze terugvalt in zijn oorspronkelijke staat. De wijzigingen die je maakt, gaan dus verloren. Dit is heel handig als je wat uit wilt proberen, maar natuurlijk minder handig als je later verder wilt werken. Om je wijzigingen op te slaan en deze permanent te maken moet je een opslag locatie koppelen aan je container. Node -Red gebruikt de /data directory als opslag voor de gebruikers data zoals de flows die je later aan gaat maken. Een data volume aanmaken Een named volume buiten de container zorgt voor permanente oplag. Hierdoor blijft deze data beschikbaar ook nadat de container is gestopt. Je maakt een nieuw volume door de volgende command's uit te voeren: $ docker volume create --name node_red_user_data $ docker volume ls DRIVER VOLUME NAME local node_red_user_data Je start de Node-Red server nu door het volgende commado uit te voeren: $ docker run -it -p 1880:1880 -v node_red_user_data:/data --name mynodered nodered/node-red Na het commando zal het image van Node-Red eerst gedownload worden. Daarna wordt het image opgebouwd zodat het gestart wordt op je machine. Welcome to Node-RED =================== 16 Mar 14:29:17 - [info] Node-RED version: v1.0.4 16 Mar 14:29:17 - [info] Node.js version: v10.19.0 16 Mar 14:29:17 - [info] Linux 4.19.76-linuxkit x64 LE 16 Mar 14:29:18 - [info] Loading palette nodes 16 Mar 14:29:18 - [info] Settings file : /data/settings.js 16 Mar 14:29:18 - [info] Context store : 'default' [module=memory] 16 Mar 14:29:18 - [info] User directory : /data 16 Mar 14:29:18 - [warn] Projects disabled : editorTheme.projects.enabled=false 16 Mar 14:29:18 - [info] Flows file : /data/flows.json 16 Mar 14:29:18 - [info] Creating new flow file 16 Mar 14:29:18 - [warn] --------------------------------------------------------------------- Your flow credentials file is encrypted using a system-generated key. If the system-generated key is lost for any reason, your credentials file will not be recoverable, you will have to delete it and re-enter your credentials. You should set your own key using the 'credentialSecret' option in your settings file. Node-RED will then re-encrypt your credentials file using your chosen key the next time you deploy a change. --------------------------------------------------------------------- 16 Mar 14:29:18 - [info] Server now running at http://127.0.0.1:1880/ 16 Mar 14:29:18 - [info] Starting flows 16 Mar 14:29:18 - [info] Started flows Zoals je ziet is de Node-Red server gestart. Er draait nu een Linux systeem op je Windows PC en daarbinnen is Node-Red gestart. Het Power Shell venster moet je open laten staan. Deze is gekoppeld aan de server. Als je Docker Desktop hebt geinstalleerd volgens de eerdere instructies dan zie je in het dachboard ook de server staan. De volgende commando's kun je hier aanklikken als je met je muis over de server gaat: Openen in de browser Open de command line voor deze server Stop de server Opnieuw opstarten van de server Verwijder deze server Klik op het eerste icoon achter de server naam of ga met je browser nu naar het volgende adres\": http://127.0.0.1:1880/ Hier vindt je de webpagina van Node-Red en deze is momenteel nog geheel blanco. Volgende Ga verder via deze link","title":"Docker starten"},{"location":"docker-run/#docker-starten","text":"","title":"Docker starten"},{"location":"docker-run/#power-shell","text":"Het is aan te bevelen om voor de commando's hieronder de Windows Power Shell te gebruiken. Je start deze als administrator door in het zoekveld van Windows (windows toets en dan beginnen te typen) Power Shell in te typen. Naast het menu krijg je nu de optie om \"Power Shell\" te starten als administrator. Dit geeft je wat meer rechten waardoor je de installatie commando's mag uitvoeren. Om een Node-Red server te starten kun je Docker gebruiken is de meest simpele vorm: Wacht nog even met het uitvoeren dit komt later. docker run -it -p 1880:1880 --name mynodered nodered/node-red Het commando bestaat uit de volgende elementen: docker run - Het starten van de container. Deze wordt lokaal opgebouwd indien nodig -it - Koppel een terminal venster zodat we kunnen zien wat ergebeurt. -p 1880:1880 - Verbind de lokale poort 1880 met de interne poort 1880 --name mynodered - geef deze machine een lokale vriendelijke naam nodered/node-red - het image waarop deze machine gebasseerd is.","title":"Power Shell"},{"location":"docker-run/#beheer-van-gebruikers-data","text":"Standaard werkt Docker zo, dat als je de container weer stopt, dat deze terugvalt in zijn oorspronkelijke staat. De wijzigingen die je maakt, gaan dus verloren. Dit is heel handig als je wat uit wilt proberen, maar natuurlijk minder handig als je later verder wilt werken. Om je wijzigingen op te slaan en deze permanent te maken moet je een opslag locatie koppelen aan je container. Node -Red gebruikt de /data directory als opslag voor de gebruikers data zoals de flows die je later aan gaat maken.","title":"Beheer van gebruikers data"},{"location":"docker-run/#een-data-volume-aanmaken","text":"Een named volume buiten de container zorgt voor permanente oplag. Hierdoor blijft deze data beschikbaar ook nadat de container is gestopt. Je maakt een nieuw volume door de volgende command's uit te voeren: $ docker volume create --name node_red_user_data $ docker volume ls DRIVER VOLUME NAME local node_red_user_data Je start de Node-Red server nu door het volgende commado uit te voeren: $ docker run -it -p 1880:1880 -v node_red_user_data:/data --name mynodered nodered/node-red Na het commando zal het image van Node-Red eerst gedownload worden. Daarna wordt het image opgebouwd zodat het gestart wordt op je machine. Welcome to Node-RED =================== 16 Mar 14:29:17 - [info] Node-RED version: v1.0.4 16 Mar 14:29:17 - [info] Node.js version: v10.19.0 16 Mar 14:29:17 - [info] Linux 4.19.76-linuxkit x64 LE 16 Mar 14:29:18 - [info] Loading palette nodes 16 Mar 14:29:18 - [info] Settings file : /data/settings.js 16 Mar 14:29:18 - [info] Context store : 'default' [module=memory] 16 Mar 14:29:18 - [info] User directory : /data 16 Mar 14:29:18 - [warn] Projects disabled : editorTheme.projects.enabled=false 16 Mar 14:29:18 - [info] Flows file : /data/flows.json 16 Mar 14:29:18 - [info] Creating new flow file 16 Mar 14:29:18 - [warn] --------------------------------------------------------------------- Your flow credentials file is encrypted using a system-generated key. If the system-generated key is lost for any reason, your credentials file will not be recoverable, you will have to delete it and re-enter your credentials. You should set your own key using the 'credentialSecret' option in your settings file. Node-RED will then re-encrypt your credentials file using your chosen key the next time you deploy a change. --------------------------------------------------------------------- 16 Mar 14:29:18 - [info] Server now running at http://127.0.0.1:1880/ 16 Mar 14:29:18 - [info] Starting flows 16 Mar 14:29:18 - [info] Started flows Zoals je ziet is de Node-Red server gestart. Er draait nu een Linux systeem op je Windows PC en daarbinnen is Node-Red gestart. Het Power Shell venster moet je open laten staan. Deze is gekoppeld aan de server. Als je Docker Desktop hebt geinstalleerd volgens de eerdere instructies dan zie je in het dachboard ook de server staan. De volgende commando's kun je hier aanklikken als je met je muis over de server gaat: Openen in de browser Open de command line voor deze server Stop de server Opnieuw opstarten van de server Verwijder deze server Klik op het eerste icoon achter de server naam of ga met je browser nu naar het volgende adres\": http://127.0.0.1:1880/ Hier vindt je de webpagina van Node-Red en deze is momenteel nog geheel blanco. Volgende Ga verder via deze link","title":"Een data volume aanmaken"},{"location":"help/","text":"Hulp Als je tegen dingen aan loopt die niet duidelijk zijn in de handleiding, dan hoor ik dit graag. Ook voor algemene feedback over deze workshop kun je altijd contact opnemen. Via onderstaand formulier maak je een ticket aan zodat we hier makkelijk op kunnen reageren. Probeer het probleem zo goed mogelijk te omschrijven en voeg eventueel een schermafbeelding toe om helder te maken waar het probleem zit. hbspt.forms.create({ portalId: \"7361977\", formId: \"40398c8a-10b1-47a0-922c-b3c32cb34889\" });","title":"Hulp"},{"location":"help/#hulp","text":"Als je tegen dingen aan loopt die niet duidelijk zijn in de handleiding, dan hoor ik dit graag. Ook voor algemene feedback over deze workshop kun je altijd contact opnemen. Via onderstaand formulier maak je een ticket aan zodat we hier makkelijk op kunnen reageren. Probeer het probleem zo goed mogelijk te omschrijven en voeg eventueel een schermafbeelding toe om helder te maken waar het probleem zit. hbspt.forms.create({ portalId: \"7361977\", formId: \"40398c8a-10b1-47a0-922c-b3c32cb34889\" });","title":"Hulp"},{"location":"ibm-cloud/","text":"IBM Cloud Om snel en simpel gebruik te kunnen maken van Node-Red zonder dit op je eigen PC of laptop te moeten installeren, kun je gebruik maken van de Cloud van IBM. Hier is een gratis account aan te maken zodat je snel van start kunt. In deze handleiding leg ik je sap voor stap uit hoe je een account aan maakt en waar je op moet letten. De interface heeft namelijk nogal veel opties en dit kan vrij lastig zijn als je er nog niet eerder mee hebt gewerkt. IBM Cloud Account We beginnen met een account aanmaken op https://cloud.ibm.com/ Voer in het volgende scherm je gegevens in en maak een account aan. Je krijgt nu een link per email om je account te activeren. Node-Red installeren Als je dit gedaan hebt kun je inloggen en krijg je het volgende scherm: Ga dan naar het tabblad Software en zoek in de catalog naar node-red Als je deze selecteert krijg je onderstaand scherm. Klik hier nu op Create app Info Geef nu een naam op voor de app. Deze naam moet uniek zijn aangezien deze ook wordt gebruikt als onderdeel van de domein naam van de app. Je kunt ook de standaard opgegeven naam gebruiken, dan weet je zeker dat het werkt. Aangezien jij de enige bent die deze app gaat gebruiken is het voor nu ook minder interessant hoe deze app wordt genoemd. Bij de Service details geef je de dichtstbijzijnde locatie op, in dit geval London en zorg je dat het Lite pakket geselecteerd staat bij het Pricing plan . Nu kun je de app aanmaken via de knop Create . Het aanmaken en activeren van de app kan enkele minuten duren. Als alles goed is gegaan krijg je onderstaand scherm te zien. Hier druk je nu op Deploy your app Hierna krijg je onderstaand scherm. Je moet nu eerst een IBM Cloud API Key maken. Dit doe je door op New+ te klikken. En daarna op OK In het volgende scherm vul je de volgende gegevens in: Verhoog het geheugen naar 256 MB anders loop je het risico dat je te weinig hebt. Stel de Region van de app in op London . Een andere regio werkt momenteel niet. De host naam moet uniek zijn en bepaald het voorste deel van de url van je app. Mocht deze al in gebruik zijn, dan krijg je een foutmelding en moet je hier een andere invullen. De onderste Region maak je gelijk aan de regio bij 2 Druk daarna op Create om deze app aan te maken. Info Het kan enkele minuten duren voordat de applicatie volledig is opgestart. Hierna is de Node-Red app nu klaar voor gebruik. Open de Node-Red Applicatie De Node-Red applicatie is nu actief en we kunnen de applicatie nu openen. Hiervoor hebben we de juiste url nodig om de applicatie te openen. Ga hiervoor naar het dashboard en dan de resource list Open de Cloud Foundry apps en selecteer hier je eerder aangemaakte app. Je krijgt dan het volgende scherm Klik hier op Visit App URL Er opent nu een nieuw scherm met jou nieuwe Node-Red app. Deze moet nu nog beveiligd worden, zodat niet iedereen er bij kan. Beveiligen van je Node-Red app In je nieuwe app krijg je nu een aantal schermen te zien. Vul de gevraagde gegevens in zoals een zelf bedachte gebruikersnaam en bijbehorende wachtwoord. Let Op! Vul hier een andere gebruiker en wachtwoord in dan waarmee je inlogd op de IBM Cloud omgeving. Deze login wordt alleen gebruikt voor de beveiliging van de Node-Red app. Na het laatste scherm wordt de app gestart en kun je naar de flow editor Log nu in met de eerder opgegeven gebruiker en wachtwoord combinatie. Je krijgt nu het start scherm van een nieuwe flow te zien. Hoofdstuk afgerond Nu kun je verder met het volgende deel van deze handleiding namelijk het maken van een flow om dat van Buienradar zichtbaar te maken in een dashboard! Ga verder via deze link","title":"IBM Cloud"},{"location":"ibm-cloud/#ibm-cloud","text":"Om snel en simpel gebruik te kunnen maken van Node-Red zonder dit op je eigen PC of laptop te moeten installeren, kun je gebruik maken van de Cloud van IBM. Hier is een gratis account aan te maken zodat je snel van start kunt. In deze handleiding leg ik je sap voor stap uit hoe je een account aan maakt en waar je op moet letten. De interface heeft namelijk nogal veel opties en dit kan vrij lastig zijn als je er nog niet eerder mee hebt gewerkt.","title":"IBM Cloud"},{"location":"ibm-cloud/#ibm-cloud-account","text":"We beginnen met een account aanmaken op https://cloud.ibm.com/ Voer in het volgende scherm je gegevens in en maak een account aan. Je krijgt nu een link per email om je account te activeren.","title":"IBM  Cloud Account"},{"location":"ibm-cloud/#node-red-installeren","text":"Als je dit gedaan hebt kun je inloggen en krijg je het volgende scherm: Ga dan naar het tabblad Software en zoek in de catalog naar node-red Als je deze selecteert krijg je onderstaand scherm. Klik hier nu op Create app Info Geef nu een naam op voor de app. Deze naam moet uniek zijn aangezien deze ook wordt gebruikt als onderdeel van de domein naam van de app. Je kunt ook de standaard opgegeven naam gebruiken, dan weet je zeker dat het werkt. Aangezien jij de enige bent die deze app gaat gebruiken is het voor nu ook minder interessant hoe deze app wordt genoemd. Bij de Service details geef je de dichtstbijzijnde locatie op, in dit geval London en zorg je dat het Lite pakket geselecteerd staat bij het Pricing plan . Nu kun je de app aanmaken via de knop Create . Het aanmaken en activeren van de app kan enkele minuten duren. Als alles goed is gegaan krijg je onderstaand scherm te zien. Hier druk je nu op Deploy your app Hierna krijg je onderstaand scherm. Je moet nu eerst een IBM Cloud API Key maken. Dit doe je door op New+ te klikken. En daarna op OK In het volgende scherm vul je de volgende gegevens in: Verhoog het geheugen naar 256 MB anders loop je het risico dat je te weinig hebt. Stel de Region van de app in op London . Een andere regio werkt momenteel niet. De host naam moet uniek zijn en bepaald het voorste deel van de url van je app. Mocht deze al in gebruik zijn, dan krijg je een foutmelding en moet je hier een andere invullen. De onderste Region maak je gelijk aan de regio bij 2 Druk daarna op Create om deze app aan te maken. Info Het kan enkele minuten duren voordat de applicatie volledig is opgestart. Hierna is de Node-Red app nu klaar voor gebruik.","title":"Node-Red installeren"},{"location":"ibm-cloud/#open-de-node-red-applicatie","text":"De Node-Red applicatie is nu actief en we kunnen de applicatie nu openen. Hiervoor hebben we de juiste url nodig om de applicatie te openen. Ga hiervoor naar het dashboard en dan de resource list Open de Cloud Foundry apps en selecteer hier je eerder aangemaakte app. Je krijgt dan het volgende scherm Klik hier op Visit App URL Er opent nu een nieuw scherm met jou nieuwe Node-Red app. Deze moet nu nog beveiligd worden, zodat niet iedereen er bij kan.","title":"Open de Node-Red Applicatie"},{"location":"ibm-cloud/#beveiligen-van-je-node-red-app","text":"In je nieuwe app krijg je nu een aantal schermen te zien. Vul de gevraagde gegevens in zoals een zelf bedachte gebruikersnaam en bijbehorende wachtwoord. Let Op! Vul hier een andere gebruiker en wachtwoord in dan waarmee je inlogd op de IBM Cloud omgeving. Deze login wordt alleen gebruikt voor de beveiliging van de Node-Red app. Na het laatste scherm wordt de app gestart en kun je naar de flow editor Log nu in met de eerder opgegeven gebruiker en wachtwoord combinatie. Je krijgt nu het start scherm van een nieuwe flow te zien. Hoofdstuk afgerond Nu kun je verder met het volgende deel van deze handleiding namelijk het maken van een flow om dat van Buienradar zichtbaar te maken in een dashboard! Ga verder via deze link","title":"Beveiligen van je Node-Red app"},{"location":"installatie/","text":"Installatie De installatie van Node-Red kan op meeder manieren. Een lokale installatie op je PC, een installatie via Docker en het starten van Node-Red op een cloud server van IBM. Deze laatste optie heeft de voorkeur aangezien je dan niet afhankelijk bent van de eigenschappen van je eigen PC. IBM Cloud Hoe maak je een account en een eigen server aan op de IBM Cloud? Ga snel naar dit hoofdstuk als je voor deze installatie optie gaat. Gebruikersnaam Voor deze externe gegeven moet je een account aanmaken bij IBM. Mogelijk krijg je daarna ook email berichten met reclame voor deze dienst. Het aanmelden is gratis, maar houd hier wel rekening mee. Wil je je gegevens niet delen met een 3de partij, dan kun je kiezen voor een van de andere opties. IBM Cloud installatie Installatie via Docker Met Docker start je een virtuele omgeving op je eigen machine. Hiermee heb je een installatie die je makkelijk kunt installeren en weinig tot geen resten op je systeem achter laat als je na de workshop alles weer wilt verwijderen. Alleen Docker installeer je dan op je systeem en dit is gemakkelijk weer te verwijderen. Voor deze handleiding gaan we uit van een installatie op Windows 10. Maar de installatie kan voor het zelfde gemak op een Mac ge\u00efnstalleerd worden. De commando's zijn vrijwel gelijk. Docker installatie","title":"Installatie"},{"location":"installatie/#installatie","text":"De installatie van Node-Red kan op meeder manieren. Een lokale installatie op je PC, een installatie via Docker en het starten van Node-Red op een cloud server van IBM. Deze laatste optie heeft de voorkeur aangezien je dan niet afhankelijk bent van de eigenschappen van je eigen PC.","title":"Installatie"},{"location":"installatie/#ibm-cloud","text":"Hoe maak je een account en een eigen server aan op de IBM Cloud? Ga snel naar dit hoofdstuk als je voor deze installatie optie gaat. Gebruikersnaam Voor deze externe gegeven moet je een account aanmaken bij IBM. Mogelijk krijg je daarna ook email berichten met reclame voor deze dienst. Het aanmelden is gratis, maar houd hier wel rekening mee. Wil je je gegevens niet delen met een 3de partij, dan kun je kiezen voor een van de andere opties. IBM Cloud installatie","title":"IBM Cloud"},{"location":"installatie/#installatie-via-docker","text":"Met Docker start je een virtuele omgeving op je eigen machine. Hiermee heb je een installatie die je makkelijk kunt installeren en weinig tot geen resten op je systeem achter laat als je na de workshop alles weer wilt verwijderen. Alleen Docker installeer je dan op je systeem en dit is gemakkelijk weer te verwijderen. Voor deze handleiding gaan we uit van een installatie op Windows 10. Maar de installatie kan voor het zelfde gemak op een Mac ge\u00efnstalleerd worden. De commando's zijn vrijwel gelijk. Docker installatie","title":"Installatie via Docker"},{"location":"local-install/","text":"Als dit gelukt is kun je onderstaande instructies verder overslaan. Lokale installatie Mocht je computer te weinig geheugen hebben om Docker te draaien dan kan een lokale installatie uitkomst bieden. De onderstaande instructies gaan uit van Windows. Heb je een anders besturingssysteem of bijvoorbeeld een Raspberry Pi, dan kun je de instructies van de Node-Red website gebruiken: https://nodered.org/docs/getting-started/ Het is aan te bevelen om voor de commando's hieronder de Windows Power Shell te gebruiken. Je start deze als administrator door in het zoekveld van Windows (windows toets en dan beginnen te typen) Power Shell in te typen. Naast het menu krijg je nu de optie om \"Power Shell\" te starten als administrator. Dit geeft je wat meer rechten waardoor je de installatie commando's mag uitvoeren. Node.js installeren Je kunt de laatste versie van node.js installeren van de officiele website van node.js, https://nodejs.org/en/. Kies op deze pagina voor de LTS versie. Dit is de meest stabiele versie en voldoende voor node-red. LTS staat voor L ong T erm S upport. Zorg dat je de installatie uitvoert met lokale administrator rechten.","title":"Local install"},{"location":"local-install/#lokale-installatie","text":"Mocht je computer te weinig geheugen hebben om Docker te draaien dan kan een lokale installatie uitkomst bieden. De onderstaande instructies gaan uit van Windows. Heb je een anders besturingssysteem of bijvoorbeeld een Raspberry Pi, dan kun je de instructies van de Node-Red website gebruiken: https://nodered.org/docs/getting-started/ Het is aan te bevelen om voor de commando's hieronder de Windows Power Shell te gebruiken. Je start deze als administrator door in het zoekveld van Windows (windows toets en dan beginnen te typen) Power Shell in te typen. Naast het menu krijg je nu de optie om \"Power Shell\" te starten als administrator. Dit geeft je wat meer rechten waardoor je de installatie commando's mag uitvoeren.","title":"Lokale installatie"},{"location":"local-install/#nodejs-installeren","text":"Je kunt de laatste versie van node.js installeren van de officiele website van node.js, https://nodejs.org/en/. Kies op deze pagina voor de LTS versie. Dit is de meest stabiele versie en voldoende voor node-red. LTS staat voor L ong T erm S upport. Zorg dat je de installatie uitvoert met lokale administrator rechten.","title":"Node.js installeren"},{"location":"telegram/","text":"Telegram communicatie Om met de buiten wereld te communiceren kunnen we onze flow uitberiden met communicatie via Telegram. Met deze applicatie kun je op je desktop, ios of android communiceren met je Node-Red flow. Installatie telegram Allereerst moeten we net als in het vorige deel, eerst de blokken toevoegen om met telegram te kunnen communiceren. Ga naar de instellingen ( In de rechter bovenhoek) en open Manage Palette . Zoek nu naar telegram en installeer node-red-contrib-chatbot @BotFather De volgende stap is het creeren van een Telegram bot. Je kunt dit op je telefoon doen, maar nog handiger is om de desktop app te installeren. Hiermee kun je dan straks gemakkelijk de api-key kopieren die je nodig hebt voor de activatie. Start een nieuwe chat door te zoeken naar @BotFather Type nu in het berichten veld de tekst /newbot Bedenk hierna een naam voor je nieuwe bot. Bijvoorbeeld node-red-buienradar. Hierna vraagt de bot om een gebruikers naam. Deze naam moet uniek zijn, dus het kan zijn dat je enkele varianten moet proberen. Ook moet de naam eindigen op \"bot\". Dus bijvoorbeeld buienradarBot (maar die was al bezet zoals je kunt zien) Je krijgt nu ook de API key terug. Bewaar deze goed, aangezien we die nodig hebben voor onze flow. Een handig commando om de instellingen aan te passen is de volgende: /mybots Geeft een lijst met opties om ze makkelijk aan te passen. Waaronder het veranderen van de naam en het verwijderen als je klaar bent met deze workshop. In de volgende stap gaan we de bot verbinden met de flow in Node-Red Telegram flow","title":"Telegram communicatie"},{"location":"telegram/#telegram-communicatie","text":"Om met de buiten wereld te communiceren kunnen we onze flow uitberiden met communicatie via Telegram. Met deze applicatie kun je op je desktop, ios of android communiceren met je Node-Red flow.","title":"Telegram communicatie"},{"location":"telegram/#installatie-telegram","text":"Allereerst moeten we net als in het vorige deel, eerst de blokken toevoegen om met telegram te kunnen communiceren. Ga naar de instellingen ( In de rechter bovenhoek) en open Manage Palette . Zoek nu naar telegram en installeer node-red-contrib-chatbot","title":"Installatie telegram"},{"location":"telegram/#botfather","text":"De volgende stap is het creeren van een Telegram bot. Je kunt dit op je telefoon doen, maar nog handiger is om de desktop app te installeren. Hiermee kun je dan straks gemakkelijk de api-key kopieren die je nodig hebt voor de activatie. Start een nieuwe chat door te zoeken naar @BotFather Type nu in het berichten veld de tekst /newbot Bedenk hierna een naam voor je nieuwe bot. Bijvoorbeeld node-red-buienradar. Hierna vraagt de bot om een gebruikers naam. Deze naam moet uniek zijn, dus het kan zijn dat je enkele varianten moet proberen. Ook moet de naam eindigen op \"bot\". Dus bijvoorbeeld buienradarBot (maar die was al bezet zoals je kunt zien) Je krijgt nu ook de API key terug. Bewaar deze goed, aangezien we die nodig hebben voor onze flow. Een handig commando om de instellingen aan te passen is de volgende: /mybots Geeft een lijst met opties om ze makkelijk aan te passen. Waaronder het veranderen van de naam en het verwijderen als je klaar bent met deze workshop. In de volgende stap gaan we de bot verbinden met de flow in Node-Red","title":"@BotFather"},{"location":"telegram/#telegram-flow","text":"","title":"Telegram flow"},{"location":"weerstation/","text":"Weerstation In dit hoofdstuk gaan we een dashboard maken met de weerdata van Buien Radar. Installatie van de extra blokken Als je de voorgaande stappen goed hebt doorlopen moet je nu in het dashboard van Node-Red zitten en zie je onderstaand scherm met een blanco flow: In Node-Red kun je doormiddel van bouwblokken verschillende functies aan elkaar knopen. Dit heet een flow en de eerste lege flow zie je hierboven. De blokken links kun je in de flow slepen en daarna kun je hier weer andere functie aan vast maken. Voordat we verder gaan, moeten we eerst nog wat extra installeren. Momenteel ontbreken namelijk de bouwblokken van Buienradar en ook de blokken van het dashboard zijn nog niet aan wezig. Ga eerst naar de rechterbovenhoek van je scherm en klik daar op de drie horizontale lijnen en daarna op Manage pallet Je krijgt nu het volgende scherm: Ga naar het tabblad Install en vul daarna in het zoekveld de term dashboard in. Je ziet nu de node-red-dashboard module in de lijst. Klik op install om de module te installeren. Je moet vervolgens bevestigen dat je de module echt wilt installeren. Klik op Install Nu we toch in dit scherm zitten, installeren we direct de Buienradar plugin. Doe dit op de zelfde manier. De Buien Radar plugin heet node-red-contrib-buienradar Dit scherm kun je nu sluiten. Als het goed is zijn de volgende blokken nu zichtbaar in de linker balk: Nu zijn alle blokken goed ge\u00efnstalleerd en kunnen we onze eerste flow maken. Weerdata inlezen van Buienradar Sleep nu het Buienradar block naar het raster in het midden van het scherm Sleep nu een debug block naast het Buienradar block Zodra je het debug block neerzet zal dit veranderen in een msg.payload block Zoals je ziet heeft het Buienradar Block aan beide zieden een klein grijs vlakje staan. Deze vierkanten zijn de connectoren van een block. Aan de linkerkant vindt je de ingangen, aan de rechterkant de uitgangen. Deze vlakken kunnen worden gebruikt om twee of meerdere blokken aan elkaar te verbinden. Maak nu de connectie tussen de uitgang van het Buitenradar block en de ingang van het debug of msg.payload block . De blokken zijn nu verboden en je kunt nu het Buienradar block gaan instellen. Dubbelklik op het Buienradar block. Nu krijg je onderstaand configuratie scherm. Verander het Station naar de dichtstbijzijnde locatie en set een interval om de hoeveel minuten je de data zou willen ophalen. Voor deze workshop is 1 keer per minuut voldoende. Klik daarna op Done . Je eerste Flow activeren De flow die je nu hebt gemaakt is nog niet actief. Daarvoor moet je de server de opdracht geven om de huidige flow te activeren. Dit doe je door in de rechterbovenhoek op te klikken. De server zal de flow nu activeren en beginnen met de uitvoer. Om te bekijken wat voor data het Buienradar block nu inleest en in welk formaat die aan de uitgangskant beschikbaar is, moeten we bekijken wat er in het debug block binnen komt. Alle input van de debug blokken in de flow komen binnen op de debug console. Je opent deze door op het \"bug\" symbool te drukken in de rechter bovenhoek . Je krijgt nu alle debug berichten te zien. Klik op het pijltje om het bericht verder te bekijken. Je krijgt nu alle info te zien die het Buienradar block heeft binnen gekregen. Je selecteert temperatuurGC en kopieert het pad door op het >_ icoon te drukken. Hiermee kopieer je de link naar dit specifieke object. We gaan nu zorgen dat deze data uit het gehele bericht wordt gefilterd. Dit doe je door een naar je flow te slepen onder het debug block . Ook dit block veranderd weer van naam naar set.msg.payload Verbind de uitgang van Buienradar met dit nieuwe block. Je krijgt dan het onderstaande. Door te dubbel klikken op dit nieuwe block krijg je de eigenschappen weer te zien. Geef nu als naam op Temperatuur en verander het to : veld naar msg. en plak hier het eerder gekopieerde path van het debug scherm. Je plakt als het goed is nu de tekst: payload.buienradar.temperatuurGC Als je nu een debug block achter het change blok zet, dan kun je in het debug venster zien of de temperatuur overeenkomt. Je krijgt dan de volgende flow Als je weer op deploy drukt dan krijg je in het debug venster het volgende Als dit overeenkomt werkt het zoals bedoeld. Je kunt nu het debug blok achter de change functie verwijderen door het te selecteren en dan op delete te drukken Zo niet, dan zit er ergens nog iets fout. Loop dan de instructies nog even na. Wellicht heb je het verkeerde path geselecteerd vanuit de lijst met waardes in het debug venster. Nu is dit deel klaar. We gaan nu een meter plaatsen voor het dashboard. Dashboard Bij de dashboard blokken heb je verschillende manieren om de data te visualiseren. We selecteren voor de temperatuur het blok Sleep dit naast het temperatuur blok en verbind de twee. Je configureert het blok nu als volgt Als eerste moet je een Group toevoegen. Klik hiervoor op achter het Group veld. Je krijgt nu onderstaande dialoog Geef hier een naam voor de group en maak ook een nieuw tabblad aan. Je krijgt dan het volgende scherm Druk hierna op Add om deze actie toe te voegen. Je komt hierna in het configuratie scherm van de Gauge Vul de overige gegevens in zodat de juiste labels zichtbaar worden in je dashboard. Klik hierna op Done en je komt weer in je flow scherm. Klik nu op Deploy zodat je flow actief wordt. Als alles goed is gegaan en je hebt geen fouten, dan kun je het dashboard bereiken door rechtsboven in je scherm op het icon te klikken. Mocht deze niet zichtbaar zijn dan kun je meer opties zichtbaar maken via het pijltje aan de zijkant. Je ziet nu het volgende scherm Je opent het dashboard nu door op het icoon naast de tabbladen te klikken Je dashboard ziet er nu ongeveer zo uit: Zoals je ziet is er momenteel maar 1 tabblad 1 . Deze heeft de titel zoals eerder ingegeven. Ook zie je bij 2 een groep waar de meter van de temperatuur in zit. De labels zoals je die eerder hebt aangegeven zijn zichtbaar. Je kunt meerdere meters groeperen door middel van een group en verschillende soorten data op meerdere tabbladen zichtbaar maken. Luchtvochtigheid toevoegen Probeer nu zelf de luchtvochtigheid toe te voegen op dezelfde manier als de temperatuur. Je moet nu iets krijgen dat lijkt op onderstaande afbeelding. Na een deploy ziet je dashboard er zo uit: Je ziet dat zonder dat je je scherm ververst, het dashboard veranderd na een deploy . De weerdata wordt nu elke minuut ingelezen en automatisch ververst. Toevoegen weer tekst Op de zelfde manier voeg je nu icoonzin data van buienradar toe aan een text block Je flow ziet er nu zo uit: Je dashboard ziet er nu zo uit: Zoals je ziet is de volgorde willekeurig en staat het tekst blok nu tussen de meters, wat de leesbaarheid niet vergroot. We zullen nu de volgorde aanpassen. Ga naar het dashboard gedeelte aan de rechterkant en klap de data uit met de pijlen aan de linker kant van de labels. Door de volgorde te slepen kun je een iets logischere indeling maken Je dashboard ziet er nu zo uit: Weergave veranderen Je kunt ook spelen met het type meter dat op je dashboard staat. Via de instellingen van de kun je deze naar bijvoorbeeld een donut zetten. Hiermee krijg je een ander uiterlijk. Extra Voel je vrij om ook de andere data van Buienradar toe te voegen. Je kunt zelf kiezen in welke vorm dit het beste tot zijn recht komt. Probeer te spelen met meerdere groepen op het dashboard en verschillende soorten meters. Zoek op wikipedia op wat de meet bereiken zijn van de verschillende waardes. Zo kan een meter bijvoorbeeld ook op een andere waarde beginnen dan op 0 zoals bijvoorbeeld bij de luchtdruk deze zal altijd een minimale waarde hebben en ook nooit boven een bepaalde waarde uitkomen. De temperatuur in ditvoorbeeld begint bijvoorbeeld op 0 maar het kan natuurlijk ook vriezen. Een voorbeeld vindt je hieronder.","title":"Weerstation"},{"location":"weerstation/#weerstation","text":"In dit hoofdstuk gaan we een dashboard maken met de weerdata van Buien Radar.","title":"Weerstation"},{"location":"weerstation/#installatie-van-de-extra-blokken","text":"Als je de voorgaande stappen goed hebt doorlopen moet je nu in het dashboard van Node-Red zitten en zie je onderstaand scherm met een blanco flow: In Node-Red kun je doormiddel van bouwblokken verschillende functies aan elkaar knopen. Dit heet een flow en de eerste lege flow zie je hierboven. De blokken links kun je in de flow slepen en daarna kun je hier weer andere functie aan vast maken. Voordat we verder gaan, moeten we eerst nog wat extra installeren. Momenteel ontbreken namelijk de bouwblokken van Buienradar en ook de blokken van het dashboard zijn nog niet aan wezig. Ga eerst naar de rechterbovenhoek van je scherm en klik daar op de drie horizontale lijnen en daarna op Manage pallet Je krijgt nu het volgende scherm: Ga naar het tabblad Install en vul daarna in het zoekveld de term dashboard in. Je ziet nu de node-red-dashboard module in de lijst. Klik op install om de module te installeren. Je moet vervolgens bevestigen dat je de module echt wilt installeren. Klik op Install Nu we toch in dit scherm zitten, installeren we direct de Buienradar plugin. Doe dit op de zelfde manier. De Buien Radar plugin heet node-red-contrib-buienradar Dit scherm kun je nu sluiten. Als het goed is zijn de volgende blokken nu zichtbaar in de linker balk: Nu zijn alle blokken goed ge\u00efnstalleerd en kunnen we onze eerste flow maken.","title":"Installatie van de extra blokken"},{"location":"weerstation/#weerdata-inlezen-van-buienradar","text":"Sleep nu het Buienradar block naar het raster in het midden van het scherm Sleep nu een debug block naast het Buienradar block Zodra je het debug block neerzet zal dit veranderen in een msg.payload block Zoals je ziet heeft het Buienradar Block aan beide zieden een klein grijs vlakje staan. Deze vierkanten zijn de connectoren van een block. Aan de linkerkant vindt je de ingangen, aan de rechterkant de uitgangen. Deze vlakken kunnen worden gebruikt om twee of meerdere blokken aan elkaar te verbinden. Maak nu de connectie tussen de uitgang van het Buitenradar block en de ingang van het debug of msg.payload block . De blokken zijn nu verboden en je kunt nu het Buienradar block gaan instellen. Dubbelklik op het Buienradar block. Nu krijg je onderstaand configuratie scherm. Verander het Station naar de dichtstbijzijnde locatie en set een interval om de hoeveel minuten je de data zou willen ophalen. Voor deze workshop is 1 keer per minuut voldoende. Klik daarna op Done .","title":"Weerdata inlezen van Buienradar"},{"location":"weerstation/#je-eerste-flow-activeren","text":"De flow die je nu hebt gemaakt is nog niet actief. Daarvoor moet je de server de opdracht geven om de huidige flow te activeren. Dit doe je door in de rechterbovenhoek op te klikken. De server zal de flow nu activeren en beginnen met de uitvoer. Om te bekijken wat voor data het Buienradar block nu inleest en in welk formaat die aan de uitgangskant beschikbaar is, moeten we bekijken wat er in het debug block binnen komt. Alle input van de debug blokken in de flow komen binnen op de debug console. Je opent deze door op het \"bug\" symbool te drukken in de rechter bovenhoek . Je krijgt nu alle debug berichten te zien. Klik op het pijltje om het bericht verder te bekijken. Je krijgt nu alle info te zien die het Buienradar block heeft binnen gekregen. Je selecteert temperatuurGC en kopieert het pad door op het >_ icoon te drukken. Hiermee kopieer je de link naar dit specifieke object. We gaan nu zorgen dat deze data uit het gehele bericht wordt gefilterd. Dit doe je door een naar je flow te slepen onder het debug block . Ook dit block veranderd weer van naam naar set.msg.payload Verbind de uitgang van Buienradar met dit nieuwe block. Je krijgt dan het onderstaande. Door te dubbel klikken op dit nieuwe block krijg je de eigenschappen weer te zien. Geef nu als naam op Temperatuur en verander het to : veld naar msg. en plak hier het eerder gekopieerde path van het debug scherm. Je plakt als het goed is nu de tekst: payload.buienradar.temperatuurGC Als je nu een debug block achter het change blok zet, dan kun je in het debug venster zien of de temperatuur overeenkomt. Je krijgt dan de volgende flow Als je weer op deploy drukt dan krijg je in het debug venster het volgende Als dit overeenkomt werkt het zoals bedoeld. Je kunt nu het debug blok achter de change functie verwijderen door het te selecteren en dan op delete te drukken Zo niet, dan zit er ergens nog iets fout. Loop dan de instructies nog even na. Wellicht heb je het verkeerde path geselecteerd vanuit de lijst met waardes in het debug venster. Nu is dit deel klaar. We gaan nu een meter plaatsen voor het dashboard.","title":"Je eerste Flow activeren"},{"location":"weerstation/#dashboard","text":"Bij de dashboard blokken heb je verschillende manieren om de data te visualiseren. We selecteren voor de temperatuur het blok Sleep dit naast het temperatuur blok en verbind de twee. Je configureert het blok nu als volgt Als eerste moet je een Group toevoegen. Klik hiervoor op achter het Group veld. Je krijgt nu onderstaande dialoog Geef hier een naam voor de group en maak ook een nieuw tabblad aan. Je krijgt dan het volgende scherm Druk hierna op Add om deze actie toe te voegen. Je komt hierna in het configuratie scherm van de Gauge Vul de overige gegevens in zodat de juiste labels zichtbaar worden in je dashboard. Klik hierna op Done en je komt weer in je flow scherm. Klik nu op Deploy zodat je flow actief wordt. Als alles goed is gegaan en je hebt geen fouten, dan kun je het dashboard bereiken door rechtsboven in je scherm op het icon te klikken. Mocht deze niet zichtbaar zijn dan kun je meer opties zichtbaar maken via het pijltje aan de zijkant. Je ziet nu het volgende scherm Je opent het dashboard nu door op het icoon naast de tabbladen te klikken Je dashboard ziet er nu ongeveer zo uit: Zoals je ziet is er momenteel maar 1 tabblad 1 . Deze heeft de titel zoals eerder ingegeven. Ook zie je bij 2 een groep waar de meter van de temperatuur in zit. De labels zoals je die eerder hebt aangegeven zijn zichtbaar. Je kunt meerdere meters groeperen door middel van een group en verschillende soorten data op meerdere tabbladen zichtbaar maken.","title":"Dashboard"},{"location":"weerstation/#luchtvochtigheid-toevoegen","text":"Probeer nu zelf de luchtvochtigheid toe te voegen op dezelfde manier als de temperatuur. Je moet nu iets krijgen dat lijkt op onderstaande afbeelding. Na een deploy ziet je dashboard er zo uit: Je ziet dat zonder dat je je scherm ververst, het dashboard veranderd na een deploy . De weerdata wordt nu elke minuut ingelezen en automatisch ververst.","title":"Luchtvochtigheid toevoegen"},{"location":"weerstation/#toevoegen-weer-tekst","text":"Op de zelfde manier voeg je nu icoonzin data van buienradar toe aan een text block Je flow ziet er nu zo uit: Je dashboard ziet er nu zo uit: Zoals je ziet is de volgorde willekeurig en staat het tekst blok nu tussen de meters, wat de leesbaarheid niet vergroot. We zullen nu de volgorde aanpassen. Ga naar het dashboard gedeelte aan de rechterkant en klap de data uit met de pijlen aan de linker kant van de labels. Door de volgorde te slepen kun je een iets logischere indeling maken Je dashboard ziet er nu zo uit:","title":"Toevoegen weer tekst"},{"location":"weerstation/#weergave-veranderen","text":"Je kunt ook spelen met het type meter dat op je dashboard staat. Via de instellingen van de kun je deze naar bijvoorbeeld een donut zetten. Hiermee krijg je een ander uiterlijk.","title":"Weergave veranderen"},{"location":"weerstation/#extra","text":"Voel je vrij om ook de andere data van Buienradar toe te voegen. Je kunt zelf kiezen in welke vorm dit het beste tot zijn recht komt. Probeer te spelen met meerdere groepen op het dashboard en verschillende soorten meters. Zoek op wikipedia op wat de meet bereiken zijn van de verschillende waardes. Zo kan een meter bijvoorbeeld ook op een andere waarde beginnen dan op 0 zoals bijvoorbeeld bij de luchtdruk deze zal altijd een minimale waarde hebben en ook nooit boven een bepaalde waarde uitkomen. De temperatuur in ditvoorbeeld begint bijvoorbeeld op 0 maar het kan natuurlijk ook vriezen. Een voorbeeld vindt je hieronder.","title":"Extra"}]}